"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.hasAnyFlags = hasAnyFlags;
exports.hasFlags = hasFlags;
exports.is = is;
exports.isArray = isArray;
exports.isBufferArray = isBufferArray;
exports.isBlankObject = isBlankObject;
exports.isBoolean = isBoolean;
exports.isDate = isDate;
exports.isIso8601DateString = isIso8601DateString;
exports.isUndefined = isUndefined;
exports.isEmpty = isEmpty;
exports.isEqual = isEqual;
exports.isFunction = isFunction;
exports.isHash = isHash;
exports.isInteger = isInteger;
exports.isRegExp = isRegExp;
exports.isString = isString;
exports.isTypedArray = isTypedArray;
exports.isNull = isNull;
exports.isNumber = isNumber;
exports.isObject = isObject;
exports.isPromise = isPromise;
exports.isWindow = isWindow;

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function simpleCompare(a, b) {
  return a === b || a !== a && b !== b;
}

function hasAnyFlags(flags, mask) {
  flags = parseInt(flags, 10);
  mask = parseInt(mask, 10);

  if (isNaN(flags) || isNaN(mask)) {
    return false;
  }

  return (mask & flags) !== 0;
}

function hasFlags(flags, mask) {
  flags = parseInt(flags, 10);
  mask = parseInt(mask, 10);

  if (isNaN(flags) || isNaN(mask)) {
    return false;
  }

  return (mask & flags) === mask;
}

function is(val1, val2) {
  if (val1 === val2) return val1 !== 0 || 1 / val1 === 1 / val2;
  return val1 !== val1 && val2 !== val2;
}

function isArray(val) {
  return null !== val && {}.toString.call(val) === '[object Array]';
}

function isBufferArray(val) {
  return Object.prototype.toString.call(val) === '[object ArrayBuffer]';
}

function isBlankObject(val) {
  return val !== null && _typeof(val) === 'object' && !Object.getPrototypeOf(val);
}

function isBoolean(val) {
  return typeof val === 'boolean';
}

function isDate(val) {
  return val instanceof Date;
}

function isIso8601DateString(val) {
  var iso8601 = /^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?(Z|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/i;
  return iso8601.test(val);
}

function isUndefined(val) {
  return typeof val === 'undefined';
}

function isEmpty(val) {
  var inheritedObjectRegex = /\[object [^\]]+\]/g;

  if (isNull(val) || isUndefined(val) || isFunction(val)) {
    return true;
  }

  if ((isArray(val) || isString(val)) && val.length > 0) {
    return false;
  }

  if ((isArray(val) || isString(val)) && val.length === 0) {
    return true;
  }

  if (isNumber(val)) {
    return false;
  }

  if (isBoolean(val)) {
    return false;
  }

  if (isDate(val)) {
    return isNaN(val.getTime());
  }

  if (!isObject(val) && inheritedObjectRegex.test(Object.prototype.toString.call(val))) {
    return false;
  }

  if (isObject(val)) {
    for (var key in val) {
      if (val.hasOwnProperty(key)) {
        return false;
      }
    }
  }

  return true;
}

function isEqual(o1, o2) {
  if (o1 === o2) return true;
  if (o1 === null || o2 === null) return false; // eslint-disable-next-line no-self-compare

  if (o1 !== o1 && o2 !== o2) return true; // NaN === NaN

  if (isIso8601DateString(o1)) {
    if (!isIso8601DateString(o2)) return false;
    return simpleCompare(new Date(o1).getTime(), new Date(o2).getTime());
  }

  var t1 = _typeof(o1),
      t2 = _typeof(o2),
      length,
      key,
      keySet;

  if (t1 === t2 && t1 === 'object') {
    if (Array.isArray(o1)) {
      if (!Array.isArray(o2)) return false;

      if ((length = o1.length) === o2.length) {
        for (key = 0; key < length; key++) {
          if (!isEqual(o1[key], o2[key])) return false;
        }

        return true;
      }
    } else if (isDate(o1)) {
      if (!isDate(o2)) return false; // @ts-ignore

      return simpleCompare(o1.getTime(), o2.getTime());
    } else if (isRegExp(o1)) {
      if (!isRegExp(o2)) return false;
      return o1.toString() === o2.toString();
    } else {
      if (isWindow(o1) || isWindow(o2) || Array.isArray(o2) || isDate(o2) || isRegExp(o2)) return false;
      keySet = Object.create(null);

      for (var _key in o1) {
        if (_key.charAt(0) === '$' || isFunction(o1[_key])) continue; // @ts-ignore

        if (!isEqual(o1[_key], o2[_key])) return false;
        keySet[_key] = true;
      }

      for (key in o2) {
        if (!(key in keySet) && key.charAt(0) !== '$' && !isUndefined(o2[key]) && !isFunction(o2[key])) return false;
      }

      return true;
    }
  }

  return false;
}

function isFunction(val) {
  return typeof val === 'function';
}

function isHash(val) {
  return isObject(val) && !isArray(val) && !isFunction(val);
}

function isInteger(val) {
  return isNumber(val) && val % 1 === 0;
}

function isRegExp(val) {
  return val instanceof RegExp;
}

function isString(val) {
  return typeof val === 'string';
}

function isTypedArray(val) {
  var TYPED_ARRAY_REGEXP = new RegExp(/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/);
  return val && isNumber(val.length) && TYPED_ARRAY_REGEXP.test(Object.prototype.toString.call(val));
}

function isNull(val) {
  return val === null;
}

function isNumber(val) {
  return typeof val === 'number' && !isNaN(val);
}

function isObject(val) {
  return null !== val && {}.toString.call(val) === '[object Object]';
}

function isPromise(val) {
  return !!val && isFunction(val.then);
}

function isWindow(val) {
  return val && val.window === val;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9xdWFsaXR5LnRzIl0sIm5hbWVzIjpbInNpbXBsZUNvbXBhcmUiLCJhIiwiYiIsImhhc0FueUZsYWdzIiwiZmxhZ3MiLCJtYXNrIiwicGFyc2VJbnQiLCJpc05hTiIsImhhc0ZsYWdzIiwiaXMiLCJ2YWwxIiwidmFsMiIsImlzQXJyYXkiLCJ2YWwiLCJ0b1N0cmluZyIsImNhbGwiLCJpc0J1ZmZlckFycmF5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaXNCbGFua09iamVjdCIsImdldFByb3RvdHlwZU9mIiwiaXNCb29sZWFuIiwiaXNEYXRlIiwiRGF0ZSIsImlzSXNvODYwMURhdGVTdHJpbmciLCJpc284NjAxIiwidGVzdCIsImlzVW5kZWZpbmVkIiwiaXNFbXB0eSIsImluaGVyaXRlZE9iamVjdFJlZ2V4IiwiaXNOdWxsIiwiaXNGdW5jdGlvbiIsImlzU3RyaW5nIiwibGVuZ3RoIiwiaXNOdW1iZXIiLCJnZXRUaW1lIiwiaXNPYmplY3QiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsImlzRXF1YWwiLCJvMSIsIm8yIiwidDEiLCJ0MiIsImtleVNldCIsIkFycmF5IiwiaXNSZWdFeHAiLCJpc1dpbmRvdyIsImNyZWF0ZSIsImNoYXJBdCIsImlzSGFzaCIsImlzSW50ZWdlciIsIlJlZ0V4cCIsImlzVHlwZWRBcnJheSIsIlRZUEVEX0FSUkFZX1JFR0VYUCIsImlzUHJvbWlzZSIsInRoZW4iLCJ3aW5kb3ciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQSxTQUFTQSxhQUFULENBQXVCQyxDQUF2QixFQUErQkMsQ0FBL0IsRUFBdUM7QUFDdEMsU0FBT0QsQ0FBQyxLQUFLQyxDQUFOLElBQVlELENBQUMsS0FBS0EsQ0FBTixJQUFXQyxDQUFDLEtBQUtBLENBQXBDO0FBQ0E7O0FBRU0sU0FBU0MsV0FBVCxDQUFxQkMsS0FBckIsRUFBaUNDLElBQWpDLEVBQTRDO0FBQ2xERCxFQUFBQSxLQUFLLEdB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eEIsQ0FBdEM7QUFDQTs7QUFFTSxTQUFTaUIsTUFBVCxDQUFnQmpCLEdBQWhCLEVBQTBCO0FBQ2hDLFNBQU9BLEdBQUcsS0FBSyxJQUFmO0FBQ0E7O0FBRU0sU0FBU3FCLFFBQVQsQ0FBa0JyQixHQUFsQixFQUE0QjtBQUNsQyxTQUFPLE9BQU9BLEdBQVAsS0FBZSxRQUFmLElBQTJCLENBQUNOLEtBQUssQ0FBQ00sR0FBRCxDQUF4QztBQUNBOztBQUVNLFNBQVN1QixRQUFULENBQWtCdkIsR0FBbEIsRUFBNEI7QUFDbEMsU0FBTyxTQUFTQSxHQUFULElBQWdCLEdBQUdDLFFBQUgsQ0FBWUMsSUFBWixDQUFpQkYsR0FBakIsTUFBMEIsaUJBQWpEO0FBQ0E7O0FBRU0sU0FBUzBDLFNBQVQsQ0FBbUIxQyxHQUFuQixFQUE2QjtBQUNuQyxTQUFPLENBQUMsQ0FBQ0EsR0FBRixJQUFTa0IsVUFBVSxDQUFDbEIsR0FBRyxDQUFDMkMsSUFBTCxDQUExQjtBQUNBOztBQUVNLFNBQVNULFFBQVQsQ0FBa0JsQyxHQUFsQixFQUE0QjtBQUNsQyxTQUFPQSxHQUFHLElBQUlBLEdBQUcsQ0FBQzRDLE1BQUosS0FBZTVDLEdBQTdCO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJcblxuZnVuY3Rpb24gc2ltcGxlQ29tcGFyZShhOiBhbnksIGI6IGFueSkge1xuXHRyZXR1cm4gYSA9PT0gYiB8fCAoYSAhPT0gYSAmJiBiICE9PSBiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc0FueUZsYWdzKGZsYWdzOiBhbnksIG1hc2s6IGFueSkge1xuXHRmbGFncyA9IHBhcnNlSW50KGZsYWdzLCAxMCk7XG5cdG1hc2sgPSBwYXJzZUludChtYXNrLCAxMCk7XG5cblx0aWYgKGlzTmFOKGZsYWdzKSB8fCBpc05hTihtYXNrKSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHJldHVybiAobWFzayAmIGZsYWdzKSAhPT0gMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc0ZsYWdzKGZsYWdzOiBhbnksIG1hc2s6IGFueSkge1xuXHRmbGFncyA9IHBhcnNlSW50KGZsYWdzLCAxMCk7XG5cdG1hc2sgPSBwYXJzZUludChtYXNrLCAxMCk7XG5cblx0aWYgKGlzTmFOKGZsYWdzKSB8fCBpc05hTihtYXNrKSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHJldHVybiAobWFzayAmIGZsYWdzKSA9PT0gbWFzaztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzKHZhbDE6IGFueSwgdmFsMjogYW55KSB7XG5cdGlmICh2YWwxID09PSB2YWwyKSByZXR1cm4gdmFsMSAhPT0gMCB8fCAxIC8gdmFsMSA9PT0gMSAvIHZhbDI7XG5cdHJldHVybiB2YWwxICE9PSB2YWwxICYmIHZhbDIgIT09IHZhbDI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0FycmF5KHZhbDogYW55KSB7XG5cdHJldHVybiBudWxsICE9PSB2YWwgJiYge30udG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNCdWZmZXJBcnJheSh2YWw6IGFueSkge1xuXHRyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXSc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0JsYW5rT2JqZWN0KHZhbDogYW55KSB7XG5cdHJldHVybiB2YWwgIT09IG51bGwgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCcgJiYgIU9iamVjdC5nZXRQcm90b3R5cGVPZih2YWwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNCb29sZWFuKHZhbDogYW55KSB7XG5cdHJldHVybiB0eXBlb2YgdmFsID09PSAnYm9vbGVhbic7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0RhdGUodmFsOiBhbnkpIHtcblx0cmV0dXJuIHZhbCBpbnN0YW5jZW9mIERhdGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0lzbzg2MDFEYXRlU3RyaW5nKHZhbDogYW55KTogYm9vbGVhbiB7XG5cdGNvbnN0IGlzbzg2MDEgPSAvXihbXFwrLV0/XFxkezR9KD8hXFxkezJ9XFxiKSkoKC0/KSgoMFsxLTldfDFbMC0yXSkoXFwzKFsxMl1cXGR8MFsxLTldfDNbMDFdKSk/fFcoWzAtNF1cXGR8NVswLTJdKSgtP1sxLTddKT98KDAwWzEtOV18MFsxLTldXFxkfFsxMl1cXGR7Mn18MyhbMC01XVxcZHw2WzEtNl0pKSkoW1RcXHNdKCgoWzAxXVxcZHwyWzAtM10pKCg6PylbMC01XVxcZCk/fDI0XFw6PzAwKShbXFwuLF1cXGQrKD8hOikpPyk/KFxcMTdbMC01XVxcZChbXFwuLF1cXGQrKT8pPyhafChbXFwrLV0pKFswMV1cXGR8MlswLTNdKTo/KFswLTVdXFxkKT8pPyk/KT8kL2k7XG5cblx0cmV0dXJuIGlzbzg2MDEudGVzdCh2YWwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsOiBhbnkpIHtcblx0cmV0dXJuIHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNFbXB0eSh2YWw6IGFueSkge1xuXHRsZXQgaW5oZXJpdGVkT2JqZWN0UmVnZXggPSAvXFxbb2JqZWN0IFteXFxdXStcXF0vZztcblx0aWYgKGlzTnVsbCh2YWwpIHx8IGlzVW5kZWZpbmVkKHZhbCkgfHwgaXNGdW5jdGlvbih2YWwpKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0aWYgKChpc0FycmF5KHZhbCkgfHwgaXNTdHJpbmcodmFsKSkgJiYgdmFsLmxlbmd0aCA+IDApIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0aWYgKChpc0FycmF5KHZhbCkgfHwgaXNTdHJpbmcodmFsKSkgJiYgdmFsLmxlbmd0aCA9PT0gMCkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdGlmIChpc051bWJlcih2YWwpKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGlmIChpc0Jvb2xlYW4odmFsKSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRpZiAoaXNEYXRlKHZhbCkpIHtcblx0XHRyZXR1cm4gaXNOYU4odmFsLmdldFRpbWUoKSk7XG5cdH1cblx0aWYgKCFpc09iamVjdCh2YWwpICYmIGluaGVyaXRlZE9iamVjdFJlZ2V4LnRlc3QoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkpKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGlmIChpc09iamVjdCh2YWwpKSB7XG5cdFx0Zm9yIChsZXQga2V5IGluIHZhbCkge1xuXHRcdFx0aWYgKHZhbC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRXF1YWwobzE6IGFueSwgbzI6IGFueSkge1xuXHRpZiAobzEgPT09IG8yKSByZXR1cm4gdHJ1ZTtcblx0aWYgKG8xID09PSBudWxsIHx8IG8yID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcblx0aWYgKG8xICE9PSBvMSAmJiBvMiAhPT0gbzIpIHJldHVybiB0cnVlOyAvLyBOYU4gPT09IE5hTlxuXHRpZiAoaXNJc284NjAxRGF0ZVN0cmluZyhvMSkpIHtcblx0XHRpZiAoIWlzSXNvODYwMURhdGVTdHJpbmcobzIpKSByZXR1cm4gZmFsc2U7XG5cdFx0cmV0dXJuIHNpbXBsZUNvbXBhcmUobmV3IERhdGUobzEpLmdldFRpbWUoKSwgbmV3IERhdGUobzIpLmdldFRpbWUoKSk7XG5cdH1cblx0bGV0IHQxID0gdHlwZW9mIG8xLFxuXHRcdHQyID0gdHlwZW9mIG8yLFxuXHRcdGxlbmd0aCxcblx0XHRrZXksXG5cdFx0a2V5U2V0O1xuXG5cdGlmICh0MSA9PT0gdDIgJiYgdDEgPT09ICdvYmplY3QnKSB7XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkobzEpKSB7XG5cdFx0XHRpZiAoIUFycmF5LmlzQXJyYXkobzIpKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRpZiAoKGxlbmd0aCA9IG8xLmxlbmd0aCkgPT09IG8yLmxlbmd0aCkge1xuXHRcdFx0XHRmb3IgKGtleSA9IDA7IGtleSA8IGxlbmd0aDsga2V5KyspIHtcblx0XHRcdFx0XHRpZiAoIWlzRXF1YWwobzFba2V5XSwgbzJba2V5XSkpIHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGlzRGF0ZShvMSkpIHtcblx0XHRcdGlmICghaXNEYXRlKG8yKSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0cmV0dXJuIHNpbXBsZUNvbXBhcmUobzEuZ2V0VGltZSgpLCBvMi5nZXRUaW1lKCkpO1xuXHRcdH0gZWxzZSBpZiAoaXNSZWdFeHAobzEpKSB7XG5cdFx0XHRpZiAoIWlzUmVnRXhwKG8yKSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0cmV0dXJuIG8xLnRvU3RyaW5nKCkgPT09IG8yLnRvU3RyaW5nKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmIChpc1dpbmRvdyhvMSkgfHwgaXNXaW5kb3cobzIpIHx8IEFycmF5LmlzQXJyYXkobzIpIHx8IGlzRGF0ZShvMikgfHwgaXNSZWdFeHAobzIpKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRrZXlTZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRcdFx0Zm9yIChsZXQga2V5IGluIG8xKSB7XG5cdFx0XHRcdGlmIChrZXkuY2hhckF0KDApID09PSAnJCcgfHwgaXNGdW5jdGlvbihvMVtrZXldKSkgY29udGludWU7XG5cdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0aWYgKCFpc0VxdWFsKG8xW2tleV0sIG8yW2tleV0pKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGtleVNldFtrZXldID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGZvciAoa2V5IGluIG8yKSB7XG5cdFx0XHRcdGlmICghKGtleSBpbiBrZXlTZXQpICYmIGtleS5jaGFyQXQoMCkgIT09ICckJyAmJiAhaXNVbmRlZmluZWQobzJba2V5XSkgJiYgIWlzRnVuY3Rpb24obzJba2V5XSkpIHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbDogYW55KSB7XG5cdHJldHVybiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNIYXNoKHZhbDogYW55KSB7XG5cdHJldHVybiBpc09iamVjdCh2YWwpICYmICFpc0FycmF5KHZhbCkgJiYgIWlzRnVuY3Rpb24odmFsKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSW50ZWdlcih2YWw6IGFueSkge1xuXHRyZXR1cm4gaXNOdW1iZXIodmFsKSAmJiB2YWwgJSAxID09PSAwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNSZWdFeHAodmFsOiBhbnkpIHtcblx0cmV0dXJuIHZhbCBpbnN0YW5jZW9mIFJlZ0V4cDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3RyaW5nKHZhbDogYW55KSB7XG5cdHJldHVybiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVHlwZWRBcnJheSh2YWw6IGFueSkge1xuXHRjb25zdCBUWVBFRF9BUlJBWV9SRUdFWFAgPSBuZXcgUmVnRXhwKC9eXFxbb2JqZWN0ICg/OlVpbnQ4fFVpbnQ4Q2xhbXBlZHxVaW50MTZ8VWludDMyfEludDh8SW50MTZ8SW50MzJ8RmxvYXQzMnxGbG9hdDY0KUFycmF5XFxdJC8pO1xuXHRyZXR1cm4gdmFsICYmIGlzTnVtYmVyKHZhbC5sZW5ndGgpICYmIFRZUEVEX0FSUkFZX1JFR0VYUC50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVsbCh2YWw6IGFueSkge1xuXHRyZXR1cm4gdmFsID09PSBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOdW1iZXIodmFsOiBhbnkpIHtcblx0cmV0dXJuIHR5cGVvZiB2YWwgPT09ICdudW1iZXInICYmICFpc05hTih2YWwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QodmFsOiBhbnkpIHtcblx0cmV0dXJuIG51bGwgIT09IHZhbCAmJiB7fS50b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNQcm9taXNlKHZhbDogYW55KSB7XG5cdHJldHVybiAhIXZhbCAmJiBpc0Z1bmN0aW9uKHZhbC50aGVuKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzV2luZG93KHZhbDogYW55KSB7XG5cdHJldHVybiB2YWwgJiYgdmFsLndpbmRvdyA9PT0gdmFsO1xufSJdfQ==